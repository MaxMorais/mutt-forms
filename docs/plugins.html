<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Pug Plugins Overview</title>
    <link rel="stylesheet" href="assets/milligram.min.css">
    <link rel="stylesheet" href="assets/doc.css">
    <script src="../build/plugins.js"></script>
    <script src="assets/doc-form.js"></script>
    <script>
    var pugForm;

    function fakeSubmit(data) {
        window.console.log('Submitted form!');
        window.console.log(data);
    }

    function main() {
        var pugFormAutocomplete = new Pug(
            document.getElementById('autocomplete'),
            {
                title: 'Autocomplete',
                properties: {
                    testautocomplete: {
                        type: "string",
                        title: "Autocomplete - try 'Example'",
                        required: true
                    },
                    testautocompleteajax: {
                        type: "string",
                        title: "Autocomplete AJAX - try a country name",
                        required: true
                    }
                }
            },
            {
                fields: {
                    testautocomplete: {
                        widget: 'autocomplete',
                        data: 'Example,Another,Test'
                    },
                    testautocompleteajax: {
                        widget: 'autocomplete',
                        data: 'https://restcountries.eu/rest/v1/lang/fr',
                        filter: (data) => {
                            return data.map((i) => { return i.name; });
                        }
                    }
                }
            },
            (data) => {
                fakeSubmit(data);
            },
            true
        );

        pugFormAutocomplete.setFormId('demo-autocomplete-form');
        pugFormAutocomplete.render().then((form) => {
            window.console.log('Rendered -> ' + form.id);
        });


        var pugFormPicker = new Pug(
            document.getElementById('datepicker'),
            {
                title: 'Date Picker',
                properties: {
                    testdatepicker: {
                        type: "string",
                        title: "Datepicker",
                        required: true
                    }
                }
            },
            {
                fields: {
                    testdatepicker: {
                        widget: 'datepicker'
                    }
                }
            },
            (data) => {
                fakeSubmit(data);
            },
            true
        );

        pugFormPicker.setFormId('demo-datepicker-form');
        pugFormPicker.render().then((form) => {
            window.console.log('Rendered -> ' + form.id);
        });
    }

    document.addEventListener('DOMContentLoaded', main);
    </script>
</head>
<body>
    <main class="wrapper">
        <section class="container">
            <h3>Plugin: Autocomplete</h3>
            <div id="autocomplete"></div>
            <hr>
            <h3>Plugin: Datepicker</h3>
            <div id="datepicker"></div>
        </section>
    </main>
</body>
</html>