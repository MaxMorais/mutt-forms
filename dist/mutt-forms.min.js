var Mutt=function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},o=function(){function t(r){e(this,t),this.error=null,this.messages={required:"This field is required."},Object.assign(this.messages,r)}return t.prototype.validate=function(t){return!0},t}(),s=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.validate=function(t){return!(!t&&0!==t)||(this.error=this.messages.required,!1)},r}(o),a=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.validate=function(t){return!0===t||!1===t||(this.error=this.messages.required,!1)},r}(o),l=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.validate=function(t){return!0===t||(this.error=this.messages.required,!1)},r}(o),u=function(t){function r(i){var o=i.min,s=void 0===o?null:o,a=i.max,l=void 0===a?null:a,u=i.messages,d=void 0===u?null:u;e(this,r);var h=n(this,t.call(this,d));return h.min=s,h.max=l,h.messages.hasOwnProperty("minLength")||(h.messages.minLength="Length must be at least "+h.min+"!"),h.messages.hasOwnProperty("maxLength")||(h.messages.maxLength="Length must be no more than "+h.max+"!"),h}return i(r,t),r.prototype.validate=function(t){return t?this.min&&t.length<this.min?(this.error=this.messages.minLength,!1):!(this.max&&t.length>this.max)||(this.error=this.messages.maxLength,!1):(this.error=this.messages.required,!1)},r}(o),d=function(t){function r(i){e(this,r);var o=n(this,t.call(this,i));return o.messages.hasOwnProperty("intRequired")||(o.messages.intRequired="Value must be an integer"),o}return i(r,t),r.prototype.validate=function(t){return!t||!isNaN(t)||(this.error=this.messages.intRequired,!1)},r}(o),h=function(t){function r(i,o){e(this,r);var s=n(this,t.call(this,o));return s.pattern=i,s.messages.hasOwnProperty("invalidPattern")||(s.messages.invalidPattern="Value must match the pattern: "+s.pattern),s}return i(r,t),r.prototype.validate=function(t){return t?!!t.match(this.pattern)||(this.error=this.messages.invalidPattern,!1):(this.error=this.messages.required,!1)},r}(o),p=function(){function t(r){var i=r.id,n=r.name,o=r.label,s=void 0===o?null:o,a=r.initial,l=void 0===a?null:a,u=r.widget,d=void 0===u?null:u,h=r.validators,p=void 0===h?[]:h,c=r.attribs,f=void 0===c?{}:c,v=r.description,y=void 0===v?null:v,m=r.options,b=void 0===m?{}:m,g=r.order,A=void 0===g?null:g,k=r.parent,w=void 0===k?null:k;e(this,t),this.id=i,this.name=n,this.label=s,this.description=y,this.attribs=f,this.options=b,this.validators=p,this.sortOrder=A,this.locked=!1,this.parent=w,this.label||(this.label=this.name),this.initOptions();var E=this.getWidget();d&&(E=d),this.widget=new E(this,this.type,this.id,this.name,this.label,this.attribs,this.options,l),this._errors=[]}return t.prototype.initOptions=function(){this.options.hasOwnProperty("order")&&(this.sortOrder=this.options.order),this.options.hasOwnProperty("label")&&(this.label=this.options.label),this.options.hasOwnProperty("description")&&(this.description=this.options.description)},t.prototype.render=function(){return this.widget.render()},t.prototype.destroy=function(){return this.widget.destroy()},t.prototype.postRender=function(){this.widget.postRender()},t.prototype.validate=function(){this.refreshValidationState();var t=this.value,e=this.validators,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n;if(!o.validate(t)){this.errors=o.error;break}}return!(this.errors.length>0)||(this.widget.refreshErrorState(this.errors),!1)},t.prototype.lock=function(){return!this.locked&&(this.widget.lock(),this.locked=!0,!0)},t.prototype.unlock=function(){return!!this.locked&&(this.widget.unlock(),this.locked=!1,!0)},t.prototype.refreshValidationState=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._errors=[],this.widget.errors=[],t&&this.widget.refreshErrorState([])},t.prototype.getWidget=function(){return H.config.getWidget("text")},t.prototype.getSortOrder=function(){return this.sortOrder},t.prototype.setSortOrder=function(t){this.sortOrder=t},t.prototype.toString=function(){return"Field <"+this.name+" "+this.type+">"},t.prototype.updateId=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.id;this.id=t,e&&this.widget.updateId(r,t)},t.prototype.updateName=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.name=t,e&&this.widget.updateName(t)},t.new=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l={id:t,name:e,options:i,attribs:{},parent:n},d=null,h=[];if(r.description&&(l.description=r.description),r.title&&(l.label=r.title),r.default&&(l.initial=r.default),r.enum){var p=[],c=r.enum,f=Array.isArray(c),v=0;for(c=f?c:c[Symbol.iterator]();;){var y;if(f){if(v>=c.length)break;y=c[v++]}else{if((v=c.next()).done)break;y=v.value}var m=y;p.push([m,m])}l.choices=p,d=H.config.getField("enum")}if(i.hasOwnProperty("hidden")&&i.hidden&&(l.widget=H.config.getWidget("hidden")),r.format&&H.config.hasWidget(r.format)&&(l.widget=H.config.getWidget(r.format)),i.widget&&H.config.hasWidget(i.widget)&&(l.widget=H.config.getWidget(i.widget)),r.items&&(l.items=r.items),r.properties&&(l.properties=r.properties),(o||i.hasOwnProperty("required")&&i.required)&&("boolean"===r.type?h.push(new a):h.push(new s),l.attribs.required="true"),r.required&&(l.required=r.required),r.hasOwnProperty("minLength")&&h.push(new u({min:r.minLength})),r.hasOwnProperty("maxLength")&&h.push(new u({max:r.maxLength})),i.validators&&h.unshift.apply(h,i.validators),r.hasOwnProperty("minItems")&&(l.minItems=r.minItems),r.hasOwnProperty("maxItems")&&(l.maxItems=r.maxItems),l.validators=h,!d){if(!H.config.hasField(r.type))return null;d=H.config.getField(r.type)}return new d(l)},r(t,[{key:"type",get:function(){var t=this.constructor.name.toLowerCase();return"field"!==t?t.replace("field",""):t},set:function(t){throw new Error("Unable to set type on a field instance!")}},{key:"value",get:function(){return this.widget.getValue()},set:function(t){this.widget.setValue(t)}},{key:"errors",get:function(){return this._errors},set:function(t){this._errors.push(t)}}]),t}(),c=function(){function t(r){var i=r.label,n=void 0===i?null:i,o=r.name,s=void 0===o?null:o;e(this,t),this.name=s,this.label=n,this.fields=[],this.errors={}}return t.prototype.addField=function(t){this.fields.push(t)},t.prototype.hasField=function(t){for(var e in this.fields)if(e.name===t)return!0;return!1},t.prototype.data=function(){var t={},e=this.fields,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n;t[o.name]=o.value}return t},t.prototype.populate=function(t){var e=this.fields,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n;t.hasOwnProperty(o.name)&&(o.value=t[o.name])}},t.prototype.validate=function(){var t=!0,e=this.fields,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n;o.validate()||(this.errors[o.name]=o.errors,t=!1)}return t},t.prototype.setFieldErrors=function(t){for(var e in t)this.hasField(e)&&this.getField(e)},t.prototype.setLegend=function(t){this.label=t},t.prototype.refreshValidationState=function(){this.errors={};var t=this.fields,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}i.refreshValidationState()}},t.prototype.render=function(){var t=document.createDocumentFragment(),e=document.createElement("fieldset");if(e.classList.add("mutt-fieldset"),this.name&&e.setAttribute("name",this.name),this.label){var r=document.createElement("legend");r.textContent=this.label,e.appendChild(r)}this.fields.sort(function(t,e){return t.getSortOrder()-e.getSortOrder()});var i=this.fields,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var a=s.render();e.appendChild(a)}return t.appendChild(e),t},t.prototype.postRender=function(){var t=this.fields,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}i.postRender()}},t.prototype.lock=function(){var t=this.fields,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}i.lock()}},t.prototype.unlock=function(){var t=this.fields,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}i.unlock()}},t.prototype.getFieldByPath=function(t){var e=t.split("."),r=e.shift(),i=this.fields,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var a=s;if(a.name===r){if(0===e.length)return a;if(a.constructor.prototype.hasOwnProperty("getFieldByPath"))return a.getFieldByPath(e.join("."))}}return null},t.new=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s={name:n};e.hasOwnProperty("title")&&(s.label=e.title),r.hasOwnProperty("form")&&r.form.hasOwnProperty("label")&&(s.label=r.form.label),null!==o&&(s.label=o),Object.assign(s,r),e.hasOwnProperty("properties")&&(e=e.properties);var a=new t(s),l=1,u=Object.keys(e),d=Array.isArray(u),h=0;for(u=d?u:u[Symbol.iterator]();;){var c;if(d){if(h>=u.length)break;c=u[h++]}else{if((h=u.next()).done)break;c=h.value}var f=c,v=f+"_field_"+l,y=e[f],m={};if(!i||Object.keys(i).includes(f)){r.fields&&r.fields.hasOwnProperty(f)&&(m=r.fields[f]),r.fieldsets&&(m.fieldsets=r.fieldsets);var b=p.new(v,f,y,m);b&&(b.getSortOrder()||b.setSortOrder(l),a.addField(b),l++)}}return a},t}(),f=function(){function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.schema=r,this.options={},this.callbacks={},i&&i.hasOwnProperty("form")&&(this.options=i.form),this.mount=!1,this.multipart=!1,this.id=null,this.locked=!1,this.form=null,this.fieldsets=[],this.buttons={submit:null},this.build(r,i)}return t.prototype.build=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.hasOwnProperty("fieldsets")){var r=0,i=e.fieldsets,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var a=s,l=null,u=null;a.hasOwnProperty("fields")&&(l=a.fields),a.hasOwnProperty("fieldsets")&&(e.fieldsets=a.fieldsets),a.options&&a.options.hasOwnProperty("label")&&(u=a.options.label);var d=c.new(t,e,l,"mutt-fieldset-"+r,u);this.fieldsets.push(d),r++}}else{var h=c.new(t,e);this.fieldsets.push(h)}},t.prototype.data=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var t=[],e=this.fieldsets,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n;t.push(o.data())}return t}var s={},a=this.fieldsets,l=Array.isArray(a),u=0;for(a=l?a:a[Symbol.iterator]();;){var d;if(l){if(u>=a.length)break;d=a[u++]}else{if((u=a.next()).done)break;d=u.value}var h=d;s=Object.assign(s,h.data())}return s},t.prototype.populate=function(t){var e=this.fieldsets,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}n.populate(t)}},t.prototype.render=function(t){var e=this;return this.mount=t,new Promise(function(t,r){var i=document.createDocumentFragment();e.form=document.createElement("form"),e.id&&e.form.setAttribute("id",e.id),e.form.setAttribute("method","POST"),e.form.setAttribute("action",""),e.form.setAttribute("class","mutt-form"),e.multipart&&e.form.setAttribute("enctype","multipart/form-data");var n=e.fieldsets,o=Array.isArray(n),s=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(s>=n.length)break;a=n[s++]}else{if((s=n.next()).done)break;a=s.value}var l=a.render();e.form.appendChild(l)}var u="mutt-button",d="Submit";e.options.hasOwnProperty("buttons")&&e.options.buttons.hasOwnProperty("submit")&&(e.options.buttons.submit.hasOwnProperty("class")&&(u=u+" "+e.options.buttons.submit.class),e.options.buttons.submit.hasOwnProperty("text")&&(d=e.options.buttons.submit.text));var h=document.createElement("div");if(h.setAttribute("class","mutt-button-wrapper"),e.options.hasOwnProperty("buttons")){var p=Object.keys(e.options.buttons),c=Array.isArray(p),f=0;for(p=c?p:p[Symbol.iterator]();;){var v;if(c){if(f>=p.length)break;v=p[f++]}else{if((f=p.next()).done)break;v=f.value}var y=v;if("submit"!==y){var m=e.options.buttons[y],b=document.createElement("button");b.setAttribute("name",y),b.setAttribute("class",m.class),b.setAttribute("type","button"),b.textContent=m.text,b.onclick=m.callback,e.buttons[y]=b,h.appendChild(b)}}}var g=document.createElement("button");g.setAttribute("class",u),g.setAttribute("type","submit"),g.textContent=d,g.onclick=function(t){return e.submit(t),!1},e.buttons.submit=g,h.appendChild(g),e.form.appendChild(h),i.appendChild(e.form),e.mount.appendChild(i);var A=e.fieldsets,k=Array.isArray(A),w=0;for(A=k?A:A[Symbol.iterator]();;){var E;if(k){if(w>=A.length)break;E=A[w++]}else{if((w=A.next()).done)break;E=w.value}E.postRender()}t(e)})},t.prototype.destroy=function(){if(this.mount){var t=this.mount.querySelector("form");return this.mount.removeChild(t),!0}return!1},t.prototype.validate=function(){var t=!0,e=[],r=this.fieldsets,i=Array.isArray(r),n=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(n>=r.length)break;o=r[n++]}else{if((n=r.next()).done)break;o=n.value}var s=o;s.validate()||(e.push(s.errors),t=!1)}return H.logger("Validation Complete -> Status: "+t+" -> "+JSON.stringify(e)),t},t.prototype.refreshValidationState=function(){var t=this.fieldsets,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}i.refreshValidationState()}},t.prototype.submit=function(t){var e=!1;try{e=this.validate()}catch(t){return H.logger("Unable to validate prior to submit!",t),!1}return!!e&&(H.logger("Submit form"),this.callbacks.hasOwnProperty("submit")?this.callbacks.submit(this.data(),t):this.form.submit(),!0)},t.prototype.lock=function(){H.log("Locking form");var t=this.fieldsets,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}i.lock()}},t.prototype.unlock=function(){H.log("Unlocking form");var t=this.fieldsets,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}i.unlock()}},t.prototype.on=function(t,e){return this.callbacks[t]=e,this},t.prototype.setFormId=function(t){this.id=t},t.prototype.getFormId=function(){return this.id},t.prototype.setFieldErrors=function(t){var e=this.fieldsets,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}n.setFieldErrors(t)}},t.prototype.getFieldByPath=function(t){var e=this.fieldsets,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n.getFieldByPath(t);if(o)return o}},t}(),v=function(t){function o(r){var i=r.id,s=r.name,a=r.label,l=void 0===a?null:a,d=r.initial,h=void 0===d?null:d,p=r.widget,c=void 0===p?null:p,f=r.validators,v=void 0===f?[]:f,y=r.attribs,m=void 0===y?{}:y,b=r.description,g=void 0===b?null:b,A=r.options,k=void 0===A?{}:A,w=r.order,E=void 0===w?null:w,S=r.parent,x=void 0===S?null:S,O=r.items,C=void 0===O?{}:O,F=r.minItems,P=void 0===F?1:F,I=r.maxItems,j=void 0===I?null:I;e(this,o);var W=n(this,t.call(this,{id:i,name:s,label:l,initial:h,widget:c,validators:v,attribs:m,description:g,options:k,order:E,parent:x}));W.minItems=P,W.maxItems=j>P?j:P,W.itemSchema=C,W.itemOptions=k,W.slots=[];var _=!0;if(W.options.hasOwnProperty("disablePlaceholders")&&(_=!W.options.disablePlaceholders),_)for(var V in Array.from(Array(W.minItems).keys()))W.addSlot(!1);return W.validators.push(new u({min:W.minItems,max:W.maxItems})),W._errors=[],W}return i(o,t),o.prototype.addSlot=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.slots.length+1,r=this.getSlotId(e),i=this.getSlotName(e),n=Object.assign({order:e},this.itemOptions),o=this.constructor.new(r,i,this.itemSchema,n,this);this.slots.push(o),t&&this.widget.hasOwnProperty("addSlot")&&this.widget.addSlot(o)},o.prototype.removeSlot=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return 0!==this.slots.length&&(this.slots.pop(),t&&this.widget.hasOwnProperty("removeSlot")&&this.widget.removeSlot(),!0)},o.prototype.spliceSlot=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0===this.slots.length)return!1;for(var r in this.slots)r=parseInt(r),e&&r===t&&this.slots[r].destroy();for(var i in this.slots.splice(t,1),this.slots){var n=parseInt(i)+1,o=this.getSlotId(n),s=this.getSlotName(n),a=this.slots[i];a.updateId(o,e),a.updateName(s,e)}return!0},o.prototype.getSlotId=function(t){return this.id+"_item_"+t},o.prototype.getSlotName=function(t){return this.name+"_"+t},o.prototype.validate=function(){if(this.refreshValidationState(),this.validators.length>0){var t=this.validators,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var n=i;n.validate(this.value)||(this.errors=n.error)}}if(this.errors.length>0)return this.widget.refreshErrorState(this.errors),!1;var o=!0,s=this.slots,a=Array.isArray(s),l=0;for(s=a?s:s[Symbol.iterator]();;){var u;if(a){if(l>=s.length)break;u=s[l++]}else{if((l=s.next()).done)break;u=l.value}u.validate()||(o=!1)}return o},o.prototype.refreshValidationState=function(){t.prototype.refreshValidationState.call(this),this._errors=[]},o.prototype.postRender=function(){var t=this.slots,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}i.postRender()}},o.prototype.getWidget=function(){return H.config.getWidget("array")},o.prototype.render=function(){return this.widget.renderList(this.slots)},o.prototype.getFieldByPath=function(t){var e=t.split("."),r=parseInt(e.shift());if(isNaN(r))return null;if(r>this.slots.length)return null;var i=this.slots[r];return 0===e.length?i:i.constructor.prototype.hasOwnProperty("getFieldByPath")?i.getFieldByPath(e.join(".")):null},r(o,[{key:"value",get:function(){var t=[],e=this.slots,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n;t.push(o.value)}return t},set:function(t){if(!Array.isArray(t))throw new Error("Unable to set array field value(s) from non-array!");if(t.length>this.slots.length){var e=t.length-this.slots.length,r=Array(e).keys(),i=Array.isArray(r),n=0;for(r=i?r:r[Symbol.iterator]();;){if(i){if(n>=r.length)break;r[n++]}else{if((n=r.next()).done)break;n.value}this.addSlot()}}else t.length<this.slots.length&&(this.slots=this.slots.slice(0,t.length));var o=this.slots.map(function(e,r){return[e,t[r]]}),s=Array.isArray(o),a=0;for(o=s?o:o[Symbol.iterator]();;){var l;if(s){if(a>=o.length)break;l=o[a++]}else{if((a=o.next()).done)break;l=a.value}var u=l,d=u[0],h=u[1];d.value=h}}}]),o}(p),y=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.getWidget=function(){return H.config.getWidget("button")},r}(p);var m=function(t){function o(){return e(this,o),n(this,t.apply(this,arguments))}return i(o,t),o.prototype.getWidget=function(){return H.config.getWidget("checkbox")},r(o,[{key:"value",get:function(){return function(t){if(void 0===t||null===t)return null;if("boolean"==typeof t)return t;switch(t.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(t)}}(this.widget.getValue())},set:function(t){this.widget.setValue(t)}}]),o}(p),b=function(t){function r(i){var o=i.id,s=i.name,a=i.label,l=void 0===a?null:a,u=i.initial,d=void 0===u?null:u,h=i.widget,p=void 0===h?null:h,c=i.validators,f=void 0===c?[]:c,v=i.attribs,y=void 0===v?{}:v,m=i.description,b=void 0===m?null:m,g=i.options,A=void 0===g?{}:g,k=i.order,w=void 0===k?null:k,E=i.parent,S=void 0===E?null:E,x=i.choices,O=void 0===x?[]:x;e(this,r);var C=n(this,t.call(this,{id:o,name:s,label:l,initial:d,widget:p,validators:f,attribs:y,description:b,options:A,order:w,parent:S}));return C.choices=O,A.hasOwnProperty("choices")&&(C.choices=A.choices),C.widget.hasOwnProperty("setChoices")&&C.widget.setChoices(C.choices),C}return i(r,t),r.prototype.getWidget=function(){return this.options.hasOwnProperty("widget")&&"checkboxlist"===this.options.widget?H.config.getWidget("checkboxlist"):H.config.getWidget("select")},r}(p),g=function(t){function o(r){var i=r.id,s=r.name,a=r.label,l=void 0===a?null:a,u=r.initial,h=void 0===u?null:u,p=r.widget,c=void 0===p?null:p,f=r.validators,v=void 0===f?[]:f,y=r.attribs,m=void 0===y?{}:y,b=r.description,g=void 0===b?null:b,A=r.options,k=void 0===A?{}:A,w=r.order,E=void 0===w?null:w,S=r.parent,x=void 0===S?null:S;e(this,o);var O=n(this,t.call(this,{id:i,name:s,label:l,initial:h,widget:c,validators:v,attribs:m,description:g,options:k,order:E,parent:x}));return O.validators.push(new d),O}return i(o,t),o.prototype.getWidget=function(){return H.config.getWidget("number")},r(o,[{key:"value",get:function(){var t=this.widget.getValue();return t?parseInt(t):""},set:function(t){this.widget.setValue(t)}}]),o}(p),A=function(o){function s(t){var r=t.id,i=t.name,a=t.label,l=void 0===a?null:a,u=t.initial,d=void 0===u?null:u,h=t.widget,p=void 0===h?null:h,c=t.validators,f=void 0===c?[]:c,v=t.attribs,y=void 0===v?{}:v,m=t.description,b=void 0===m?null:m,g=t.options,A=void 0===g?{}:g,k=t.order,w=void 0===k?null:k,E=t.parent,S=void 0===E?null:E,x=t.properties,O=void 0===x?{}:x,C=t.required,F=void 0===C?[]:C;e(this,s);var P=n(this,o.call(this,{id:r,name:i,label:l,initial:d,widget:p,validators:f,attribs:y,description:b,options:A,order:w,parent:S}));P.object={};var I=1,j=Object.keys(O),W=Array.isArray(j),_=0;for(j=W?j:j[Symbol.iterator]();;){var V;if(W){if(_>=j.length)break;V=j[_++]}else{if((_=j.next()).done)break;V=_.value}var L=V,q=i+"_"+L,B={},D=!1;P.options.hasOwnProperty(L)&&(B=A[L]),F.length>0&&-1!==F.indexOf(L)&&(D=!0);var N=P.constructor.new(q,L,O[L],B,P,D);if(!N)throw new Error("Unable to create Field on ObjectField!");N.getSortOrder()||N.setSortOrder(I),P.object[L]=N,I++}return P._errors={},P}return i(s,o),s.prototype.validate=function(){var t=!0,e=Object.keys(this.object),r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n,s=this.object[o];s.validate()||(this._errors[o]=s.errors,t=!1)}return t},s.prototype.refreshValidationState=function(){o.prototype.refreshValidationState.call(this),this._errors={}},s.prototype.postRender=function(){var t=Object.keys(this.object),e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var n=i;this.object[n].postRender()}},s.prototype.getWidget=function(){return H.config.getWidget("object")},s.prototype.render=function(){return this.widget.renderObject(this.object)},s.prototype.getFieldByPath=function(t){var e=t.split("."),r=e.shift(),i=Object.keys(this.object),n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var a=s,l=this.object[a];if(l.name===r){if(0===e.length)return l;if(l.constructor.prototype.hasOwnProperty("getFieldByPath"))return l.getFieldByPath(e.join("."))}}return null},r(s,[{key:"value",get:function(){var t={},e=Object.keys(this.object),r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n;t[o]=this.object[o].value}return t},set:function(e){if(e){if("object"!==(void 0===e?"undefined":t(e)))throw new Error("Unable to set object field value(s) from non-object!");var r=Object.keys(e),i=Array.isArray(r),n=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(n>=r.length)break;o=r[n++]}else{if((n=r.next()).done)break;o=n.value}var s=o;this.object.hasOwnProperty(s)&&(this.object[s].value=e[s])}}}},{key:"errors",get:function(){return this._errors},set:function(t){this._errors=t}}]),s}(p),k=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.getWidget=function(){return H.config.getWidget("text")},r}(p),w=Object.freeze({Field:p,ArrayField:v,ButtonField:y,BooleanField:m,ChoiceField:b,IntegerField:g,ObjectField:A,StringField:k}),E=function(){function t(r,i,n,o,s){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;e(this,t),this._field=r,this._rendered=!1,this.type=i,this.id=n,this.name=o,this.label=s,this.attribs=a,this.options=l,this.value=u,this.locked=!1,this.errors=[]}return t.prototype.render=function(){var t=document.createDocumentFragment(),e=this.renderWrapper(),r=this.renderLabel(),i=this.renderField(),n=this.renderHelp(),o=this.renderErrors();return r&&e.appendChild(r),e.appendChild(i),n&&e.appendChild(n),o&&e.appendChild(o),t.appendChild(e),this._rendered=!0,t},t.prototype.destroy=function(){var t=this.getElementWrapper();return t.parentNode.removeChild(t),!0},t.prototype.postRender=function(){},t.prototype.lock=function(){if(this.locked)return!1;var t=this.getElementWrapper(),e=this.getElement();return t.removeChild(e),this.locked=!0,!0},t.prototype.unlock=function(){if(!this.locked)return!1;var t=this.getElementWrapper(),e=this.getElement();t.removeChild(e);var r=this.renderField();return t.appendChild(r),this.locked=!1,!0},t.prototype.updateId=function(t,e){this.getElementWrapper(t).id=e,this.id=e},t.prototype.updateName=function(t){this.getElement().name=t,this.name=t},t.prototype.renderField=function(){throw new Error("renderField should be overidden by a widget subclass!")},t.prototype.renderWrapper=function(){var t=document.createElement("div");return t.setAttribute("id",this.id),t.className=this.getFieldWrapperClass(),t},t.prototype.renderLabel=function(){if(this.label){var t=document.createElement("label");return t.setAttribute("for",this.getFieldId()),t.setAttribute("class","mutt-label"),t.textContent=this.label,t}return null},t.prototype.renderHelp=function(){if(this.options.hasOwnProperty("help")&&this.options.help){var t=document.createElement("span");return t.setAttribute("class","mutt-help"),t.textContent=this.options.help,t}return null},t.prototype.renderErrors=function(){if(this.errors.length>0){var t=document.createElement("ul");t.className=this.getErrorClass();var e=this.errors,r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n,s=document.createElement("li");s.textContent=o,t.appendChild(s)}return t}return null},t.prototype.refreshErrorState=function(t){if(this.errors=t,this._rendered){var e=this.getElementWrapper(),r=this.getElementError(),i=this.getErrorWrapperClass();if(r&&(e.classList.remove(i),e.removeChild(r)),this.errors.length>0){e.classList.add(i);var n=this.renderErrors();n&&e.appendChild(n)}}},t.prototype.getElementWrapper=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t||(t=this.id),document.querySelector("#"+t)},t.prototype.getElement=function(){return this.getElementWrapper().querySelector(".mutt-field")},t.prototype.getElementError=function(){return this.getElementWrapper().querySelector(".mutt-error")},t.prototype.getElementLabel=function(){return this.getElementWrapper().querySelector(".mutt-label")},t.prototype.getValue=function(){if(!this._rendered)return this.value;var t=this.getElement();if(!t)throw new Error("Unable to get element!");return this.value=t.value,this.value},t.prototype.setValue=function(t){if(this.value=t,this._rendered){var e=this.getElement();e&&(e.value=this.value)}},t.prototype.getFieldClass=function(){return this.attribs.hasOwnProperty("class")?"mutt-field "+this.attribs.class:"mutt-field"},t.prototype.getFieldWrapperClass=function(){return"mutt-field-wrapper"},t.prototype.getErrorClass=function(){return"mutt-error"},t.prototype.getErrorWrapperClass=function(){return"mutt-error-wrapper"},t.prototype.getFieldId=function(){return this.name},t}(),S=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderList=function(t){var e=document.createDocumentFragment(),r=this.renderWrapper();t.sort(function(t,e){return t.getSortOrder()-e.getSortOrder()});var i=t,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var a=s.render();r.appendChild(a)}return e.appendChild(r),this._rendered=!0,e},r.prototype.render=function(){throw new Error("ArrayInput must render as a list - use renderList")},r.prototype.renderLabel=function(){throw new Error("ArrayInput does not support a label!")},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-array"},r.prototype.getElement=function(){throw new Error("Unable to get element on an array field!")},r.prototype.getElementByIndex=function(t){return this.getElementWrapper().querySelector("#"+this.id+"_item_"+t)},r.prototype.addSlot=function(t){var e=t.render();this.getElementWrapper().appendChild(e),t.postRender()},r.prototype.removeSlot=function(){var t=this._field.slots.length,e=this.getElementByIndex(t);this.getElementWrapper().removeChild(e)},r.prototype.spliceSlot=function(t){var e=this.getElementByIndex(t);this.getElementWrapper().removeChild(e)},r}(E),x=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("button");for(var e in t.setAttribute("type","button"),t.setAttribute("class",this.getFieldClass()),this.attribs)t.setAttribute(e,this.attribs[e]);return t},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-button"},r}(E),O=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=this,e=document.createElement("input");for(var r in e.setAttribute("name",this.name),e.setAttribute("id",this.getFieldId()),e.setAttribute("type","checkbox"),e.setAttribute("class",this.getFieldClass()),e.onchange=function(){t.setValue(!e.hasAttribute("checked"))},this.value&&e.setAttribute("checked","checked"),this.attribs)e.setAttribute(r,this.attribs[r]);return this._rendered=!0,e},r.prototype.getValue=function(){return this._rendered?!!this.getElement().hasAttribute("checked"):this.value},r.prototype.setValue=function(t){if(this.value=t,this._rendered){var e=this.getElement();if(e){var r=this.getElementLabel();this.value?(e.setAttribute("checked","checked"),r&&r.classList.add("mutt-field-checkbox-checked")):(e.removeAttribute("checked"),r&&r.classList.remove("mutt-field-checkbox-checked"))}}},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-checkbox"},r.prototype.getFieldId=function(){return this.id+"-checkbox"},r}(E),C=function(t){function r(i,o,s,a,l,u,d,h){e(this,r);var p=n(this,t.call(this,i,o,s,a,l,u,d,h));return p.value||(p.value=[]),p}return i(r,t),r.prototype.renderField=function(){var t=this,e=document.createElement("ul");e.setAttribute("id",this.getFieldId());var r=function(r){var i=document.createElement("li"),n=document.createElement("input");if(n.setAttribute("type","checkbox"),n.setAttribute("name",t.name),n.setAttribute("class",t.getFieldClass()),n.setAttribute("data-index",r),n.setAttribute("id",t.id+r),t.options.hasOwnProperty("choices")&&t.options.choices[r][1]){var o=document.createElement("label");o.setAttribute("for",t.id+r),o.textContent=t.options.choices[r][1],i.appendChild(o)}for(var s in n.onchange=function(){t.setValueByIndex(!n.hasAttribute("checked"),n.getAttribute("data-index"))},t.value&&t.value[r]&&n.setAttribute("checked","checked"),t.attribs)n.setAttribute(s,t.attribs[s]);i.appendChild(n),e.appendChild(i)};for(var i in this.choices)r(i);return this._rendered=!0,e},r.prototype.getValueByIndex=function(t){if(!this._rendered)return this.value[t];var e=this.getElementByIndex(t);if(!e)throw new Error("Unable to get element!");return e.hasAttribute("checked")?this.value=!0:this.value=!1,this.value},r.prototype.getValue=function(){if(!this._rendered)return this.value;var t=this.getAllElements();if(!t)throw new Error("Unable to get elements!");for(var e in Array.from(t))t[e].hasAttribute("checked")?this.value[e]=!0:this.value[e]=!1;return this.value},r.prototype.setValueByIndex=function(t,e){if(this.value[e]=t,this._rendered){var r=this.getElementByIndex(e);r&&(this.value[e]?r.setAttribute("checked","checked"):r.removeAttribute("checked"))}},r.prototype.setValue=function(t){if(this.value=t,this._rendered){var e=this.getAllElements();if(t.length!==e.length)throw new Error("Array Length does not match number of Elements in CheckboxList");for(var r in e[0].setAttribute("checked","checked"),Array.from(e))this.value[r]?e[parseInt(r)].setAttribute("checked","checked"):e[parseInt(r)].removeAttribute("checked")}},r.prototype.setChoices=function(t){for(var e in t)this.value&&void 0===this.value[e]&&(this.value[e]=!1);this.choices=t},r.prototype.getFieldId=function(){return this.id+"-checkbox"},r.prototype.getChoices=function(){return this.choices},r.prototype.getAllElements=function(){return this.getElementWrapper().querySelectorAll(".mutt-field")},r.prototype.getElementByIndex=function(t){return this.getElementWrapper().querySelectorAll(".mutt-field")[t]},r}(O),F=function(t){function r(i,o,s,a,l,u,d,h){e(this,r);var p=n(this,t.call(this,i,o,s,a,l,u,d,h));return p.choices=[],p}return i(r,t),r.prototype.setChoices=function(t){this.choices=t},r.prototype.getChoices=function(){return this.choices},r.prototype.formatLabel=function(t){return t?""+(t=t.toLowerCase().replace("_"," ")).charAt(0).toUpperCase()+t.slice(1):t},r.prototype.renderField=function(){throw new Error("Unable to render abstract widget BaseChoiceInput!")},r}(E),P=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("input");if(t.setAttribute("name",this.name),t.setAttribute("type","date"),t.setAttribute("value",this.value?this.value:""),t.setAttribute("class",this.getFieldClass()),this.options.hasOwnProperty("min"))if("now"===this.options.min){var e=new Date;t.setAttribute("min",e.toISOString().slice(0,-14))}else t.setAttribute("min",this.options.min);for(var r in this.attribs)t.setAttribute(r,this.attribs[r]);return t},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-date"},r}(E),I=function(t){function r(i,o,s,a,l){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;e(this,r);var p=n(this,t.call(this,i,o,s,a,l,u,d,null));return p.setDateValue(h),p}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("div");t.setAttribute("class","mutt-date-selector");var e=this.getDateValue(),r=document.createElement("input");r.setAttribute("name",this.name),r.setAttribute("type","hidden"),r.setAttribute("value",this.value?this.value:""),t.appendChild(r);var i=document.createElement("select");i.setAttribute("name",this.name+"-day");var n=Array.from(Array(31).keys()),o=Array.isArray(n),s=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(s>=n.length)break;a=n[s++]}else{if((s=n.next()).done)break;a=s.value}var l=a+1,u=document.createElement("option");u.setAttribute("value",("0"+l).slice(-2)),u.textContent=l,null!==e&&e.getDate()===l&&(u.selected="selected"),i.appendChild(u)}t.appendChild(i);var d=document.createElement("select");d.setAttribute("name",this.name+"-month");var h=this.getMonthNames();for(var p in h){var c=h[p],f=document.createElement("option"),v=parseInt(p)+1;v=("0"+v).slice(-2),f.setAttribute("value",v),f.textContent=c,null!==e&&e.getMonth()===parseInt(p)&&(f.selected="selected"),d.appendChild(f)}t.appendChild(d);var y=document.createElement("select");y.setAttribute("name",this.name+"-year");var m=(new Date).getFullYear(),b=m,g=20;for(this.options.hasOwnProperty("years")&&(g=this.options.years);b>m-g;){var A=document.createElement("option");A.setAttribute("value",b),A.textContent=b,null!==e&&e.getFullYear()===b&&(A.selected="selected"),y.appendChild(A),b--}return t.appendChild(y),t},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-date-selector"},r.prototype.getElementDay=function(){return this.getElementWrapper().querySelector('[name="'+this.name+'-day"]')},r.prototype.getElementMonth=function(){return this.getElementWrapper().querySelector('[name="'+this.name+'-month"]')},r.prototype.getElementYear=function(){return this.getElementWrapper().querySelector('[name="'+this.name+'-year"]')},r.prototype.getMonthNames=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},r.prototype.getDateValue=function(){if(!this._rendered)return this.value;var t=this.getElementDay(),e=this.getElementMonth(),r=this.getElementYear();if(!t||!e||!r)throw new Error("Unable to get element for date!");var i=r.value+"-"+e.value+"-"+t.value,n=Date.parse(i);if(isNaN(n))return this.value=null,this.value;var o=new Date(n);return this.value=o,this.value},r.prototype.setDateValue=function(t){if("string"==typeof t){var e=Date.parse(t);if(isNaN(e))return;t=new Date(e)}if(this.value=t,this._rendered){var r=this.getElementDay(),i=this.getElementMonth(),n=this.getElementYear(),o=t.getDate();1===o.toString().length&&(o="0"+o);var s=t.getMonth()+1;1===s.toString().length&&(s="0"+s),r&&i&&n&&(r.value=o,i.value=s,n.value=this.value.getFullYear())}},r.prototype.getValue=function(){return this.getDateValue()},r.prototype.setValue=function(t){this.setDateValue(t)},r}(E),j=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("input");for(var e in t.setAttribute("name",this.name),t.setAttribute("type","number"),t.setAttribute("inputmode","numeric"),t.setAttribute("class",this.getFieldClass()),t.setAttribute("value",null!==this.value?this.value:""),t.setAttribute("pattern","[0-9]*"),this.attribs)t.setAttribute(e,this.attribs[e]);return t},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-number"},r}(E),W=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("input");for(var e in t.setAttribute("name",this.name),t.setAttribute("type","number"),t.setAttribute("inputmode","numeric"),t.setAttribute("class",this.getFieldClass()),t.setAttribute("value",null!==this.value?this.value:""),t.setAttribute("pattern","[0-9]*"),this.attribs)t.setAttribute(e,this.attribs[e]);return t},r.prototype.getValue=function(){var e=t.prototype.getValue.call(this);return e&&(e=(e=parseFloat(e)).toFixed(2)),parseFloat(e)},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-currency"},r}(E),_=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderObjectFields=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=[],n=Object.keys(e),o=Array.isArray(n),s=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(s>=n.length)break;a=n[s++]}else{if((s=n.next()).done)break;a=s.value}var l=a;if(!r||Object.keys(r).includes(l)){var u=e[l];i.push([u.getSortOrder(),l])}}i.sort(function(t,e){return t[0]-e[0]});var d=i,h=Array.isArray(d),p=0;for(d=h?d:d[Symbol.iterator]();;){var c;if(h){if(p>=d.length)break;c=d[p++]}else{if((p=d.next()).done)break;c=p.value}var f=e[c[1]].render();t.appendChild(f)}},r.prototype.renderObject=function(t){var e=document.createDocumentFragment(),r=this.renderWrapper();if(this.options.fieldsets){var i=0,n=this.options.fieldsets,o=Array.isArray(n),s=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(s>=n.length)break;a=n[s++]}else{if((s=n.next()).done)break;a=s.value}var l=a,u=document.createElement("fieldset");if(u.classList.add("mutt-fieldset"),u.setAttribute("name",this.name+"-fieldset-"+i),l.hasOwnProperty("options")&&l.options.hasOwnProperty("class")&&l.options.class)if(l.options.class.includes(" ")){var d=l.options.class.split(" "),h=Array.isArray(d),p=0;for(d=h?d:d[Symbol.iterator]();;){var c;if(h){if(p>=d.length)break;c=d[p++]}else{if((p=d.next()).done)break;c=p.value}var f=c;u.classList.add(f)}}else u.classList.add(l.options.class);this.renderObjectFields(u,t,l.fields),r.appendChild(u),i++}}else this.renderObjectFields(r,t);return e.appendChild(r),this._rendered=!0,e},r.prototype.render=function(){throw new Error("ObjectInput must render as a object - use renderObject")},r.prototype.renderLabel=function(){throw new Error("ObjectInput does not support a label!")},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-object"},r}(E),V=function(t){function r(i,o,s,a,l,u,d,h){e(this,r);var p=n(this,t.call(this,i,o,s,a,l,u,d,h));return"boolean"===p.type&&(d.hasOwnProperty("choices")?p.choices=d.choices:p.choices=[[!0,"Yes"],[!1,"No"]]),p}return i(r,t),r.prototype.renderField=function(){var t=this,e=document.createElement("div"),r=0,i=this.choices,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var a=s,l=a[0],u=a[1],d=this.id+"_"+r,h=document.createElement("div");h.setAttribute("class","mutt-field-radio-item");var p=document.createElement("input");if(p.setAttribute("id",d),p.setAttribute("type","radio"),p.setAttribute("name",this.id),p.setAttribute("value",l),p.setAttribute("class",this.getFieldClass()),this.options.hasOwnProperty("callback")&&(p.onclick=function(){return t.options.callback(t)}),this.attribs)for(var c in this.attribs)p.setAttribute(c,this.attribs[c]);this.value===l&&p.setAttribute("checked","checked");var f=document.createElement("label");f.setAttribute("for",d),f.textContent=this.formatLabel(u),h.appendChild(p),h.appendChild(f),e.appendChild(h),r++}return e},r.prototype.getRadioValue=function(){var t=this.getElementWrapper().querySelector(".mutt-field:checked");return t?(this.value=t.value,this.value):null},r.prototype.getValue=function(){return this.getRadioValue()},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-radio"},r}(F),L=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("select");for(var e in t.setAttribute("name",this.name),t.setAttribute("class",this.getFieldClass()),this.attribs)t.setAttribute(e,this.attribs[e]);var r=this.choices,i=Array.isArray(r),n=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(n>=r.length)break;o=r[n++]}else{if((n=r.next()).done)break;o=n.value}var s=o,a=s[0],l=s[1],u=document.createElement("option");u.value=a,u.textContent=this.formatLabel(l),this.value===a&&u.setAttribute("selected","selected"),t.appendChild(u)}return t},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-select"},r}(F),q=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("input");for(var e in t.setAttribute("name",this.name),t.setAttribute("type","text"),t.setAttribute("value",this.value?this.value:""),t.setAttribute("class",this.getFieldClass()),this.attribs)t.setAttribute(e,this.attribs[e]);return t},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-text"},r}(E),B=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("textarea");for(var e in t.setAttribute("name",this.name),t.setAttribute("class",this.getFieldClass()),t.textContent=this.value?this.value:"",this.attribs)t.setAttribute(e,this.attribs[e]);return t},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-text"},r}(E),D=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("input");for(var e in t.setAttribute("name",this.name),t.setAttribute("type","email"),t.setAttribute("value",this.value?this.value:""),t.setAttribute("class",this.getFieldClass()),this.attribs)t.setAttribute(e,this.attribs[e]);return t},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-email"},r}(q),N=function(t){function r(i,o,s,a,l,u,d,h){e(this,r);var p=n(this,t.call(this,i,o,s,a,l,u,d,h));return p.choices=[],p}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("input");for(var e in t.setAttribute("name",this.name),t.setAttribute("type","hidden"),t.setAttribute("value",this.value?this.value:""),t.setAttribute("class",this.getFieldClass()),this.attribs)t.setAttribute(e,this.attribs[e]);return t},r.prototype.renderLabel=function(){return null},r.prototype.renderErrors=function(){return null},r.prototype.setChoices=function(t){this.choices=t},r.prototype.getChoices=function(){return this.choices},r}(E),R=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){var t=document.createElement("input");for(var e in t.setAttribute("name",this.name),t.setAttribute("type","password"),t.setAttribute("value",this.value?this.value:""),t.setAttribute("class",this.getFieldClass()),this.attribs)t.setAttribute(e,this.attribs[e]);return t},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-password"},r}(q);var U=function(t){function r(){return e(this,r),n(this,t.apply(this,arguments))}return i(r,t),r.prototype.renderField=function(){return t=this.value,(e=document.createElement("span")).setAttribute("class","mutt-field mutt-field-display"),e.textContent=t,e;var t,e},r.prototype.getFieldClass=function(){return"mutt-field mutt-field-display"},r}(E),M=Object.freeze({Widget:E,ArrayInput:S,ButtonWidget:x,CheckboxInput:O,CheckboxList:C,BaseChoiceWidget:F,DateInput:P,DateSelectionInput:I,NumberInput:j,CurrencyInput:W,ObjectInput:_,RadioInput:V,SelectInput:L,TextInput:q,TextAreaInput:B,EmailInput:D,HiddenInput:N,PasswordInput:R,DisplayWidget:U}),Y=function(){function t(){e(this,t),this._config={settings:{debug:!1},fields:{array:v,boolean:m,enum:b,integer:g,object:A,string:k,date:k,datetime:k,button:y},widgets:{array:S,checkbox:O,checkboxlist:C,date:P,dateselect:I,number:j,currency:W,object:_,radio:V,select:L,text:q,textarea:B,email:D,hidden:N,password:R,display:U,button:x}}}return t.prototype.getSetting=function(t){return this._config.settings.hasOwnProperty(t)?this._config.settings[t]:null},t.prototype.setSetting=function(t,e){this._config.settings[t]=e},t.prototype.use=function(t){if(!t.hasOwnProperty("install"))throw new Error("Unable to install plugin - missing install!");var e={},r=t.install();if(Array.isArray(r)){var i=r[0],n=r[1],o=r[2];e={fields:i,widgets:n,settings:o}}else e=r;e.fields&&this.registerFields(e.fields),e.widgets&&this.registerWidgets(e.widgets),e.settings&&(this._config.settings=Object.assign(this._config.settings,e.settings)),e.extensions&&Object.keys(e.extensions).forEach(function(t){var r=e.extensions[t];f.prototype[t]=r})},t.prototype.registerField=function(t,e){this._config.fields[t]=e},t.prototype.registerFields=function(t){if(t){var e=Object.keys(t),r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n;this.registerField(o,t[o])}}},t.prototype.hasField=function(t){return!!this._config.fields.hasOwnProperty(t)},t.prototype.getField=function(t){return this._config.fields.hasOwnProperty(t)?this._config.fields[t]:null},t.prototype.registerWidget=function(t,e){this._config.widgets[t]=e},t.prototype.registerWidgets=function(t){if(t){var e=Object.keys(t),r=Array.isArray(e),i=0;for(e=r?e:e[Symbol.iterator]();;){var n;if(r){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}var o=n;this.registerWidget(o,t[o])}}},t.prototype.hasWidget=function(t){return!!this._config.widgets.hasOwnProperty(t)},t.prototype.getWidget=function(t){return this._config.widgets.hasOwnProperty(t)?this._config.widgets[t]:null},t.prototype.getWidgets=function(t){return this._config.widgets},t}();function T(t,e){t=t.prototype,e=e.prototype,Object.getOwnPropertyNames(e).forEach(function(r){"constructor"!==r&&Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}function J(t){H.config.getSetting("debug")&&console.log("Mutt :: ",t)}var z=Object.freeze({Validator:o,RequiredValidator:s,BooleanRequiredValidator:a,BooleanTrueValidator:l,LengthValidator:u,IntegerValidator:d,RegexValidator:h});function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this.config.setSetting("debug",!0),void 0===t)throw new Error("You must specify a Schema!");return new f(t,e)}return function(t){var e=new Y;t.config=e,t.use=function(e){Array.isArray(e)||(e=[e]);var r=e,i=Array.isArray(r),n=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(n>=r.length)break;o=r[n++]}else{if((n=r.next()).done)break;o=n.value}var s=o;t.config.use(s)}},t.logger=J,t.mixin=T,t.fields=w,t.widgets=M,t.validators=z}(H),H.version="1.8.0",H}();
